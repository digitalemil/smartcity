{"id":"/prod/microservices/smartcity/ui/loadgenerator","volumes":[],"cmd":null,"args":null,"user":null,"env":{"APPDEF":"{'name':'Smart City Platform','showLocation':'true','fields':[{'name':'id','pivot':'false','type':'Long'},{'name':'location','pivot':'false','type':'Location'},{'name':'event_timestamp','pivot':'false','type':'Date/time'},{'name':'message1','pivot':'false','type':'String'},{'name':'type','pivot':'false','type':'Integer'},{'name':'status','pivot':'false','type':'String'},{'name':'value','pivot':'true','type':'Double'},{'name':'status','pivot':'false','type':'String'},{'name':'message2','pivot':'false','type':'String'},{'name':'intvalue2','pivot':'false','type':'Integer'},{'name':'intvalue1','pivot':'false','type':'Integer'}],'transformer':'%09%0A%09%09%0A%09%2F%2F%20Raw%20message%20available%20as%3A%20rawtext%3B%0A%09%2F%2F%20save%20result%20in%20variable%3A%20result%0A%09%2F%2F%20result%20is%20of%20type%20String%0A%09%0A%09%2F%2F%20get%20json%20object%3A%20JSON.parse(rawtext)%3B%0A%09%2F%2F%20also%20available%20fields%5B%5D%20and%20types%5B%5D%3A%0A%09%2F%2F%20e.g.%20fields%5B0%5D%3D%3D%20%22id%22%2C%20%20types%5B0%5D%3D%3D%22Long%22%0A%0A%09%2F%2F%20Transform%20incoming%20xml%20to%20json%3A%20%20json%3D%20parseXML(rawtext)%3B%20result%3D%20JSON.stringify(json)%3B%0A%09%2F%2F%20uses%20npm%20xml2js%0A%09%2F%2F%20Transform%20incoming%20yaml%20to%20json%3A%20let%20json%3DyamlParser.parse(rawtext)%3B%20console.log(%22JSON%3A%20%22%2BJSON.stringify(json))%3B%20result%3D%20JSON.stringify(json)%3B%20%0A%09%2F%2F%20uses%20npm%20yamljs%0A%09%2F%2F%20Rename%20field%3A%20let%20json%3D%20JSON.parse(rawtext)%3B%20json.newname%3D%20json.oldname%3B%20delete%20json.oldname%3B%0A%0A%09console.log(%22In%20%3A%20%22%2Brawtext)%3B%0A%2F*%0A%09let%20json%3D%20JSON.parse(rawtext)%3B%0A%20%20%20%20%20%20%20%20for%20(var%20key%20in%20json)%20%7B%0A%20%20%09%09%09if%20(json.hasOwnProperty(key))%20%7B%0A%09%09%09%09%20%20if(typesByName%5Bkey%5D%3D%3D%3D%20%22String%22)%0A%09%09%09%09%20%20%09json%5Bkey%5D%3D%20%22Great!%22%3B%0A%09%09%09%7D%0A%09%09%7D%0A%0A%09result%3D%20JSON.stringify(json)%3B%0A*%2F%0A%09result%3D%20rawtext%3B%0A%09console.log(%22After%20transformation%3A%20%22%2Bresult)%3B%0A%09%09%09%09%09%0A%09%09%09%09%09','topic':'citydata','table':'citydata','keyspace':'london','path':'smartcity','creator':'http://localhost:3000','dockerrepo':'mesosphere/dcosappstudio','img':'','vis':'','dash':'','hideloader':'true'}",
"LISTENER":"http://$PUBLICNODE:18081/data",
"KAFKA_SERVICE":"master.mesos:2181/dcos-service-prod__dataservices__kafka","CASSANDRA_SERVICE":"node.proddataservicescassandra.l4lb.thisdcos.directory:9042","PUBLICNODE":"$PUBLICNODEIP","UISERVICE":"http://prodmicroservicessmartcityuiservice.marathon.l4lb.thisdcos.directory:80","CLUSTER_URL":"CLUSTER_URL_TOKEN","APPDIR":"/opt/app","DASHBOARDURL":""},"instances":1,"cpus":0.1,"mem":512,"disk":0,"gpus":0,"executor":"","constraints":[],"fetch":[],"storeUrls":[],"backoffSeconds":1,"backoffFactor":1.15,"maxLaunchDelaySeconds":3600,"container":{"type":"MESOS","volumes":[],"docker":{"image":"mesosphere/dcosappstudio:dcosappstudio-smartcity-loadgenerator-v1.11.rc4-1.4.2-0.0.1","portMappings":null,"privileged":false,"parameters":[],"forcePullImage":true}},"healthChecks":[{"protocol":"HTTP","path":"/","gracePeriodSeconds":2,"intervalSeconds":5,"timeoutSeconds":2,"maxConsecutiveFailures":4,"portIndex":0,"ignoreHttp1xx":false}],"readinessChecks":[],"dependencies":[],"upgradeStrategy":{"minimumHealthCapacity":1,"maximumOverCapacity":1},"labels":{"HAPROXY_GROUP":"external","HAPROXY_0_VHOST":"$PUBLICNODEIP","DCOS_SERVICE_SCHEME":"http","DCOS_SERVICE_NAME":"appstudio-uismartcity","DCOS_SERVICE_PORT_INDEX":"0"},"acceptedResourceRoles":null,"ipAddress":null,"residency":null,"secrets":{},"taskKillGracePeriodSeconds":null,"portDefinitions":[{"port":10000,"protocol":"tcp","name":"myp","labels":{"VIP_0":"/prod/microservices/smartcityui:80"}},{"port":10500,"protocol":"tcp","name":"socket","labels":{"VIP_1":"/prod/microservices/smartcityui:10500"}}],"requirePorts":true}
